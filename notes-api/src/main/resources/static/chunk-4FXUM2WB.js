import{b as F,c as f,d as x,e as y,f as M,g as N,h as j,i as D,j as R}from"./chunk-SCEPUA4M.js";import{a as E}from"./chunk-F7EJBQOC.js";import{B as p,D as m,E as o,F as a,G as g,I as d,J as u,L as s,M as v,N as b,W as S,X as I,aa as C,ca as _,t as n,w as c,x as h}from"./chunk-CS3A7NQZ.js";function T(t,i){if(t&1&&(o(0,"div",12),s(1),a()),t&2){let e=u();n(),v(e.successMessage)}}function A(t,i){if(t&1&&(o(0,"div",13),s(1),a()),t&2){let e=u();n(),v(e.errorMessage)}}function k(t,i){t&1&&(o(0,"div",14),s(1," Por favor, introduce un email v\xE1lido. "),a())}var G=class t{constructor(i,e,r,l){this.fb=i;this.notesService=e;this.router=r;this.route=l}shareForm;noteId=null;successMessage=null;errorMessage=null;ngOnInit(){this.route.paramMap.subscribe(i=>{let e=i.get("id");e?this.noteId=+e:this.router.navigate(["/notes"])}),this.shareForm=this.fb.group({recipientEmail:["",[f.required,f.email]]})}onSubmit(){if(this.successMessage=null,this.errorMessage=null,this.shareForm.valid&&this.noteId){let i=this.shareForm.value.recipientEmail;this.notesService.shareNote(this.noteId,i).subscribe({next:()=>{this.successMessage=`Nota compartida exitosamente con ${i}.`,this.shareForm.reset()},error:e=>{this.errorMessage=e.error||"Error al compartir la nota."}})}}onCancel(){this.router.navigate(["/notes"])}static \u0275fac=function(e){return new(e||t)(c(D),c(E),c(_),c(C))};static \u0275cmp=h({type:t,selectors:[["app-share"]],decls:17,vars:6,consts:[[1,"container","mt-5"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card","p-4","shadow-sm"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","recipientEmail",1,"form-label"],["id","recipientEmail","type","email","formControlName","recipientEmail","placeholder","ej. amigo@ejemplo.com",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"text-danger"]],template:function(e,r){if(e&1&&(o(0,"div",0)(1,"h2"),s(2),a(),p(3,T,2,1,"div",1)(4,A,2,1,"div",2),o(5,"div",3)(6,"form",4),d("ngSubmit",function(){return r.onSubmit()}),o(7,"div",5)(8,"label",6),s(9,"Email del Destinatario"),a(),g(10,"input",7),p(11,k,2,0,"div",8),a(),o(12,"div",9)(13,"button",10),d("click",function(){return r.onCancel()}),s(14," Cancelar "),a(),o(15,"button",11),s(16," Compartir "),a()()()()()),e&2){let l;n(2),b("Compartir Nota (ID: ",r.noteId,")"),n(),m("ngIf",r.successMessage),n(),m("ngIf",r.errorMessage),n(2),m("formGroup",r.shareForm),n(5),m("ngIf",((l=r.shareForm.get("recipientEmail"))==null?null:l.invalid)&&((l=r.shareForm.get("recipientEmail"))==null?null:l.touched)),n(4),m("disabled",!r.shareForm.valid)}},dependencies:[I,S,R,M,F,x,y,N,j],encapsulation:2})};export{G as ShareComponent};
